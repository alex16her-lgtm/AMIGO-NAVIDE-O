<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>ğŸ„ Amigo NavideÃ±o Marvel</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: 'Segoe UI', Arial;
  background: linear-gradient(180deg, #0f172a, #020617);
  color: white;
  margin: 0;
  padding: 20px;
  overflow-x: hidden;
}

/* NIEVE */
.snowflake {
  position: fixed;
  top: -10px;
  color: white;
  font-size: 14px;
  animation: fall linear infinite;
  opacity: 0.8;
}
@keyframes fall {
  to { transform: translateY(110vh); }
}

h1 {
  text-align: center;
  margin-bottom: 10px;
}

.app {
  max-width: 420px;
  margin: auto;
  background: #020617;
  border-radius: 20px;
  padding: 20px;
  box-shadow: 0 0 30px rgba(0,0,0,.6);
}

.card {
  background: #1e293b;
  padding: 15px;
  border-radius: 15px;
  margin-bottom: 15px;
}

button {
  width: 100%;
  padding: 14px;
  border-radius: 12px;
  border: none;
  background: #16a34a;
  color: white;
  font-size: 16px;
  cursor: pointer;
  margin-top: 10px;
}
button:hover { background: #22c55e }

input, textarea {
  width: 100%;
  padding: 12px;
  border-radius: 10px;
  border: none;
  margin-top: 8px;
  font-size: 14px;
}

textarea { min-height: 90px }

.result {
  background: #020617;
  padding: 10px;
  border-radius: 10px;
  text-align: center;
  font-size: 18px;
  margin-top: 8px;
}

ul { padding-left: 20px }

.admin {
  display: none;
  background: #334155;
  padding: 12px;
  border-radius: 12px;
  margin-top: 10px;
}
</style>
</head>

<body>

<!-- NIEVE -->
<script>
for (let i = 0; i < 30; i++) {
  let snow = document.createElement("div");
  snow.className = "snowflake";
  snow.innerHTML = "â„";
  snow.style.left = Math.random() * 100 + "vw";
  snow.style.animationDuration = 5 + Math.random() * 5 + "s";
  snow.style.fontSize = 10 + Math.random() * 10 + "px";
  document.body.appendChild(snow);
}
</script>

<h1>ğŸ„ Amigo NavideÃ±o Marvel ğŸ¦¸â€â™‚ï¸</h1>

<div class="app">

<!-- COMO USAR -->
<div class="card">
<h3>ğŸ“² Â¿CÃ³mo usar esta pÃ¡gina?</h3>
<p>
1ï¸âƒ£ Ingresa tu <b>cÃ³digo Ãºnico</b> (cada persona tiene uno).<br><br>
2ï¸âƒ£ Presiona <b>Asignar personaje</b>. Ese serÃ¡ tu personaje Marvel durante todo el juego.<br><br>
3ï¸âƒ£ Luego presiona <b>Sortear regalo</b> para saber a quÃ© personaje debes regalar.<br><br>
4ï¸âƒ£ Escribe tu personaje y <b>mÃ­nimo 3 opciones de regalo</b> y guarda.<br><br>
5ï¸âƒ£ El 24 de diciembre ğŸ… se harÃ¡ la dinÃ¡mica para adivinar quiÃ©n es cada personaje.
</p>
<h4>ğŸ Presupuesto mÃ¡ximo: <b>$100.000</b></h4>
</div>

<!-- PARTICIPANTE -->
<div class="card">
<input id="code" placeholder="Ingresa tu cÃ³digo (Ej: AMIGO01)">

<button onclick="assignCharacter()">ğŸŒ€ Asignar personaje</button>
<div class="result">ğŸ¦¸â€â™‚ï¸ <span id="myCharacter">---</span></div>

<button onclick="drawGift()">ğŸ Sortear regalo</button>
<div class="result">ğŸ„ Regalas a: <span id="giftCharacter">---</span></div>
</div>

<!-- REGALOS -->
<div class="card">
<textarea id="rulesInput" placeholder="Ej: Iron Man - Camiseta, taza, figura..."></textarea>
<button onclick="saveRule()">ğŸ’¾ Guardar opciones</button>

<h4>ğŸ€ Opciones guardadas</h4>
<ul id="rulesList"></ul>
</div>

<!-- ADMIN -->
<div class="card">
<input id="adminKey" placeholder="Clave admin">
<button onclick="unlockAdmin()">ğŸ”</button>

<div class="admin" id="adminPanel">
<button onclick="resetAll()">â™»ï¸ Reiniciar sorteo</button>
</div>
</div>

</div>

<script>
const ADMIN_KEY = "MARVEL2025";

const characters = [
"Iron Man","Capitan America","Thor","Hulk","Viuda Negra","Ojo de Halcon",
"Spider-Man","Doctor Strange","Pantera Negra","Bruja Escarlata","Vision",
"Hombre Hormiga","Avispa","Loki","Capitan Marvel","Deadpool","Thanos"
];

let data = JSON.parse(localStorage.getItem("data")) || {};
let available = JSON.parse(localStorage.getItem("available")) || [...characters];
let rules = JSON.parse(localStorage.getItem("rules")) || [];

function saveAll() {
  localStorage.setItem("data", JSON.stringify(data));
  localStorage.setItem("available", JSON.stringify(available));
  localStorage.setItem("rules", JSON.stringify(rules));
}

function assignCharacter() {
  const code = document.getElementById("code").value.trim().toUpperCase();
  if (!code) return alert("Ingresa tu cÃ³digo");

  if (!data[code]) data[code] = {};

  if (!data[code].me) {
    const i = Math.floor(Math.random() * available.length);
    data[code].me = available.splice(i,1)[0];
    saveAll();
  }

  document.getElementById("myCharacter").innerText = data[code].me;
}

function drawGift() {
  const code = document.getElementById("code").value.trim().toUpperCase();
  if (!data[code]?.me) return alert("Primero asigna tu personaje");

  if (!data[code].gift) {
    const i = Math.floor(Math.random() * available.length);
    data[code].gift = available.splice(i,1)[0];
    saveAll();
  }

  document.getElementById("giftCharacter").innerText = data[code].gift;
}

function saveRule() {
  const text = document.getElementById("rulesInput").value.trim();
  if (!text) return;
  rules.push(text);
  document.getElementById("rulesInput").value = "";
  saveAll();
  renderRules();
}

function renderRules() {
  const ul = document.getElementById("rulesList");
  ul.innerHTML = "";
  rules.forEach(r => {
    const li = document.createElement("li");
    li.textContent = r;
    ul.appendChild(li);
  });
}

function unlockAdmin() {
  if (document.getElementById("adminKey").value === ADMIN_KEY) {
    document.getElementById("adminPanel").style.display = "block";
  }
}

function resetAll() {
  if (confirm("Â¿Seguro que deseas reiniciar TODO el sorteo?")) {
    localStorage.clear();
    location.reload();
  }
}

renderRules();
</script>

</body>
</html>





